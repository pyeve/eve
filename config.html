<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Configuration &mdash; Eve 0.8-dev documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.8-dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="top" title="Eve 0.8-dev documentation" href="index.html" />
    <link rel="next" title="Data Validation" href="validation.html" />
    <link rel="prev" title="Features" href="features.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="configuration">
<span id="config"></span><h1>Configuration<a class="headerlink" href="#configuration" title="Permalink to this headline">¶</a></h1>
<p>Generally Eve configuration is best done with configuration files. The
configuration files themselves are actual Python files. However, Eve will
give precedence to dictionary-based settings first, then it will try to
locate a file passed in <span class="target" id="index-0"></span><tt class="xref std std-envvar docutils literal"><span class="pre">EVE_SETTINGS</span></tt> environmental variable (if
set) and finally it will try to locate <cite>settings.py</cite> or a file with filename
passed to <cite>settings</cite> flag in constructor.</p>
<div class="section" id="configuration-with-files">
<h2>Configuration With Files<a class="headerlink" href="#configuration-with-files" title="Permalink to this headline">¶</a></h2>
<p>On startup, if <cite>settings</cite> flag is omitted in constructor, Eve will try to locate
file named <cite>settings.py</cite>, first in the application folder and then in one of the
application&#8217;s subfolders. You can choose an alternative filename/path, just pass
it as an argument when you instantiate the application. If the file path is
relative, Eve will try to locate it recursively in one of the folders in your
<cite>sys.path</cite>, therefore you have to be sure that your application root is appended
to it. This is useful, for example, in testing environments, when settings file
is not necessarily located in the root of your application.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="s">&#39;my_settings.py&#39;</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="configuration-with-a-dictionary">
<h2>Configuration With a Dictionary<a class="headerlink" href="#configuration-with-a-dictionary" title="Permalink to this headline">¶</a></h2>
<p>Alternatively, you can choose to provide a settings dictionary. Unlike
configuring Eve with the settings file, dictionary-based approach will only
update Eve&#8217;s default settings with your own values, rather than overwriting
all the settings.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">eve</span> <span class="kn">import</span> <span class="n">Eve</span>

<span class="n">my_settings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;MONGO_HOST&#39;</span><span class="p">:</span> <span class="s">&#39;localhost&#39;</span><span class="p">,</span>
    <span class="s">&#39;MONGO_PORT&#39;</span><span class="p">:</span> <span class="mi">27017</span><span class="p">,</span>
    <span class="s">&#39;MONGO_DBNAME&#39;</span><span class="p">:</span> <span class="s">&#39;the_db_name&#39;</span><span class="p">,</span>
    <span class="s">&#39;DOMAIN&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;contacts&#39;</span><span class="p">:</span> <span class="p">{}}</span>
<span class="p">}</span>

<span class="n">app</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">(</span><span class="n">settings</span><span class="o">=</span><span class="n">my_settings</span><span class="p">)</span>
<span class="n">app</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="development-production">
<h2>Development / Production<a class="headerlink" href="#development-production" title="Permalink to this headline">¶</a></h2>
<p>Most applications need more than one configuration. There should be at least
separate configurations for the production server and the one used during
development. The easiest way to handle this is to use a default configuration
that is always loaded and part of the version control, and a separate
configuration that overrides the values as necessary.</p>
<p>This is the main reason why you can override or extend the settings with the
contents of the file the <span class="target" id="index-1"></span><tt class="xref std std-envvar docutils literal"><span class="pre">EVE_SETTINGS</span></tt> environment variable points to.
The development/local settings could be stored in <cite>settings.py</cite> and then, in
production, you could export EVE_SETTINGS=/path/to/production_setting.py, and
you are done.</p>
<p>There are many alternative ways to handle development/production
however. Using Python modules for configuration is very convenient, as they
allow for all kinds of nice tricks, like being able to seamlessly launch the
same API on both local and production systems, connecting to the appropriate
database instance as needed.  Consider the following example, taken directly
from the <a class="reference internal" href="index.html#demo"><em>Live demo</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># We want to run seamlessly our API both locally and on Heroku, so:</span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;PORT&#39;</span><span class="p">):</span>
    <span class="c"># We&#39;re hosted on Heroku! Use the MongoHQ sandbox as our backend.</span>
    <span class="n">MONGO_HOST</span> <span class="o">=</span> <span class="s">&#39;alex.mongohq.com&#39;</span>
    <span class="n">MONGO_PORT</span> <span class="o">=</span> <span class="mi">10047</span>
    <span class="n">MONGO_USERNAME</span> <span class="o">=</span> <span class="s">&#39;&lt;user&gt;&#39;</span>
    <span class="n">MONGO_PASSWORD</span> <span class="o">=</span> <span class="s">&#39;&lt;pw&gt;&#39;</span>
    <span class="n">MONGO_DBNAME</span> <span class="o">=</span> <span class="s">&#39;&lt;dbname&gt;&#39;</span>
<span class="k">else</span><span class="p">:</span>
    <span class="c"># Running on local machine. Let&#39;s just use the local mongod instance.</span>

    <span class="c"># Please note that MONGO_HOST and MONGO_PORT could very well be left</span>
    <span class="c"># out as they already default to a bare bones local &#39;mongod&#39; instance.</span>
    <span class="n">MONGO_HOST</span> <span class="o">=</span> <span class="s">&#39;localhost&#39;</span>
    <span class="n">MONGO_PORT</span> <span class="o">=</span> <span class="mi">27017</span>
    <span class="n">MONGO_USERNAME</span> <span class="o">=</span> <span class="s">&#39;user&#39;</span>
    <span class="n">MONGO_PASSWORD</span> <span class="o">=</span> <span class="s">&#39;user&#39;</span>
    <span class="n">MONGO_DBNAME</span> <span class="o">=</span> <span class="s">&#39;apitest&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="global-configuration">
<span id="global"></span><h2>Global Configuration<a class="headerlink" href="#global-configuration" title="Permalink to this headline">¶</a></h2>
<p>Besides defining the general API behavior, most global configuration settings
are used to define the standard endpoint ruleset, and can be fine-tuned later,
when configuring individual endpoints. Global configuration settings are always
uppercase.</p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">URL_PREFIX</span></tt></td>
<td>URL prefix for all API endpoints. Will be
used in conjunction with <tt class="docutils literal"><span class="pre">API_VERSION</span></tt> to
build API endpoints (e.g., <tt class="docutils literal"><span class="pre">api</span></tt> will be
rendered to <tt class="docutils literal"><span class="pre">/api/&lt;endpoint&gt;</span></tt>).  Defaults
to <tt class="docutils literal"><span class="pre">''</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">API_VERSION</span></tt></td>
<td>API version. Will be used in conjunction with
<tt class="docutils literal"><span class="pre">URL_PREFIX</span></tt> to build API endpoints
(e.g., <tt class="docutils literal"><span class="pre">v1</span></tt> will be rendered to
<tt class="docutils literal"><span class="pre">/v1/&lt;endpoint&gt;</span></tt>). Defaults to <tt class="docutils literal"><span class="pre">''</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ALLOWED_FILTERS</span></tt></td>
<td><p class="first">List of fields on which filtering is allowed.
Can be set to <tt class="docutils literal"><span class="pre">[]</span></tt> (no filters allowed)
or <tt class="docutils literal"><span class="pre">['*']</span></tt> (filters allowed on every
field). Unless your API is comprised of
just one endpoint, this global setting
should be used as an on/off switch,
delegating explicit whitelisting at the
local level (see <tt class="docutils literal"><span class="pre">allowed_filters</span></tt>
below). Defaults to <tt class="docutils literal"><span class="pre">['*']</span></tt>.</p>
<p class="last"><em>Please note:</em> If API scraping or DB DoS
attacks are a concern, then globally
disabling filters and whitelisting valid
ones at the local level is the way to go.</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">VALIDATE_FILTERS</span></tt></td>
<td>Whether to validate the filters against the
resource schema. Invalid filters will throw
an exception. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">SORTING</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> if sorting is supported for <tt class="docutils literal"><span class="pre">GET</span></tt>
requests, otherwise <tt class="docutils literal"><span class="pre">False</span></tt>. Can be
overridden by resource settings. Defaults
to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">PAGINATION</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> if pagination is enabled for <tt class="docutils literal"><span class="pre">GET</span></tt>
requests, otherwise <tt class="docutils literal"><span class="pre">False</span></tt>. Can be
overridden by resource settings. Defaults
to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">PAGINATION_LIMIT</span></tt></td>
<td>Maximum value allowed for QUERY_MAX_RESULTS
query parameter. Values exceeding the
limit will be silently replaced with this
value. You want to aim for a reasonable
compromise between performance and transfer
size. Defaults to 50.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">PAGINATION_DEFAULT</span></tt></td>
<td>Default value for QUERY_MAX_RESULTS.
Defaults to 25.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">OPTIMIZE_PAGINATION_FOR_SPEED</span></tt></td>
<td>Set this to <tt class="docutils literal"><span class="pre">True</span></tt> to improve pagination
performance. When optimization is active no
count operation, which can be slow on large
collections, is performed on the database.
This does have a few consequences.
Firstly, no document count is returned.
Secondly, <tt class="docutils literal"><span class="pre">HATEOAS</span></tt> is less accurate: no
last page link is available, and next page
link is always included, even on last page.
On big collections, switching this feature
on can greatly improve performance.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt> (slower performance;
document count included; accurate
<tt class="docutils literal"><span class="pre">HATEOAS</span></tt>).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">QUERY_WHERE</span></tt></td>
<td>Key for the filters query parameter. Defaults to <tt class="docutils literal"><span class="pre">where</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">QUERY_SORT</span></tt></td>
<td>Key for the sort query parameter. Defaults to <tt class="docutils literal"><span class="pre">sort</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">QUERY_PROJECTION</span></tt></td>
<td>Key for the projections query parameter. Defaults to <tt class="docutils literal"><span class="pre">projection</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">QUERY_PAGE</span></tt></td>
<td>Key for the pages query parameter. Defaults to <tt class="docutils literal"><span class="pre">page</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">QUERY_MAX_RESULTS</span></tt></td>
<td>Key for the max results query parameter. Defaults to <tt class="docutils literal"><span class="pre">max_results</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">QUERY_EMBEDDED</span></tt></td>
<td>Key for the embedding query parameter. Defaults to <tt class="docutils literal"><span class="pre">embedded</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">QUERY_AGGREGATION</span></tt></td>
<td>Key for the aggregation query parameter.
Defaults to <tt class="docutils literal"><span class="pre">aggregate</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">DATE_FORMAT</span></tt></td>
<td>A Python date format used to parse and render
datetime values. When serving requests,
matching JSON strings will be parsed and
stored as <tt class="docutils literal"><span class="pre">datetime</span></tt> values. In
responses, <tt class="docutils literal"><span class="pre">datetime</span></tt> values will be
rendered as JSON strings using this format.
Defaults to the RFC1123 (ex RFC 822)
standard <tt class="docutils literal"><span class="pre">a,</span> <span class="pre">%d</span> <span class="pre">%b</span> <span class="pre">%Y</span> <span class="pre">%H:%M:%S</span> <span class="pre">GMT</span></tt>
(&#8220;Tue, 02 Apr 2013 10:29:13 GMT&#8221;).</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">RESOURCE_METHODS</span></tt></td>
<td>A list of HTTP methods supported at resource
endpoints. Allowed values: <tt class="docutils literal"><span class="pre">GET</span></tt>,
<tt class="docutils literal"><span class="pre">POST</span></tt>, <tt class="docutils literal"><span class="pre">DELETE</span></tt>. <tt class="docutils literal"><span class="pre">POST</span></tt> is used for
insertions. <tt class="docutils literal"><span class="pre">DELETE</span></tt> will delete <em>all</em>
resource contents (enable with caution).
Can be overridden by resource settings.
Defaults to <tt class="docutils literal"><span class="pre">['GET']</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">PUBLIC_METHODS</span></tt></td>
<td>A list of HTTP methods supported at resource
endpoints, open to public access even when
<a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> is enabled. Can be overridden
by resource settings. Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ITEM_METHODS</span></tt></td>
<td>A list of HTTP methods supported at item
endpoints. Allowed values: <tt class="docutils literal"><span class="pre">GET</span></tt>,
<tt class="docutils literal"><span class="pre">PATCH</span></tt>, <tt class="docutils literal"><span class="pre">PUT</span></tt> and <tt class="docutils literal"><span class="pre">DELETE</span></tt>. <tt class="docutils literal"><span class="pre">PATCH</span></tt>
or, for clients not supporting PATCH,
<tt class="docutils literal"><span class="pre">POST</span></tt> with the <tt class="docutils literal"><span class="pre">X-HTTP-Method-Override</span></tt>
header tag, is used for item updates;
<tt class="docutils literal"><span class="pre">DELETE</span></tt> for item deletion. Can be
overridden by resource settings. Defaults to
<tt class="docutils literal"><span class="pre">['GET']</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">PUBLIC_ITEM_METHODS</span></tt></td>
<td>A list of HTTP methods supported at item
endpoints, left open to public access when
when <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> is enabled. Can be
overridden by resource settings. Defaults
to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ALLOWED_ROLES</span></tt></td>
<td>A list of allowed <cite>roles</cite> for resource
endpoints. Can be overridden by resource
settings. See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more
information. Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ALLOWED_READ_ROLES</span></tt></td>
<td>A list of allowed <cite>roles</cite> for resource
endpoints with GET and OPTIONS methods.
Can be overridden by resource
settings. See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more
information. Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ALLOWED_WRITE_ROLES</span></tt></td>
<td>A list of allowed <cite>roles</cite> for resource
endpoints with POST, PUT and DELETE
methods. Can be overridden by resource
settings. See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more
information. Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ALLOWED_ITEM_ROLES</span></tt></td>
<td>A list of allowed <cite>roles</cite> for item endpoints.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more information. Can
be overridden by resource settings.
Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ALLOWED_ITEM_READ_ROLES</span></tt></td>
<td>A list of allowed <cite>roles</cite> for item endpoints
with GET and OPTIONS methods.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more information. Can
be overridden by resource settings.
Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ALLOWED_ITEM_WRITE_ROLES</span></tt></td>
<td>A list of allowed <cite>roles</cite> for item endpoints
with PUT, PATCH and DELETE methods.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more information. Can
be overridden by resource settings.
Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ALLOW_OVERRIDE_HTTP_METHOD</span></tt></td>
<td>Enables / Disables global the possibility
to override the sent method with a header
<tt class="docutils literal"><span class="pre">X-HTTP-METHOD-OVERRIDE</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">CACHE_CONTROL</span></tt></td>
<td>Value of the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> header field
used when serving <tt class="docutils literal"><span class="pre">GET</span></tt> requests (e.g.,
<tt class="docutils literal"><span class="pre">max-age=20,must-revalidate</span></tt>). Leave
empty if you don&#8217;t want to include cache
directives with API responses. Can be
overridden by resource settings. Defaults
to <tt class="docutils literal"><span class="pre">''</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">CACHE_EXPIRES</span></tt></td>
<td>Value (in seconds) of the <tt class="docutils literal"><span class="pre">Expires</span></tt> header
field used when serving <tt class="docutils literal"><span class="pre">GET</span></tt> requests.
If set to a non-zero value, the header will
always be included, regardless of the
setting of <tt class="docutils literal"><span class="pre">CACHE_CONTROL</span></tt>. Can be
overridden by resource settings. Defaults
to 0.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">X_DOMAINS</span></tt></td>
<td>CORS (Cross-Origin Resource Sharing) support.
Allows API maintainers to specify which
domains are allowed to perform CORS
requests. Allowed values are: <tt class="docutils literal"><span class="pre">None</span></tt>,
a list of domains, or <tt class="docutils literal"><span class="pre">'*'</span></tt> for
a wide-open API. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">X_DOMAINS_RE</span></tt></td>
<td>The same setting as <tt class="docutils literal"><span class="pre">X_DOMAINS</span></tt>, but a list
of regexes is allowed. This is useful for
websites with dynamic ranges of
subdomains. Make sure to properly anchor and
escape the regexes. Invalid
regexes (such as <tt class="docutils literal"><span class="pre">'*'</span></tt>) are ignored.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">X_HEADERS</span></tt></td>
<td>CORS (Cross-Origin Resource Sharing) support.
Allows API maintainers to specify which
headers are allowed to be sent with CORS
requests. Allowed values are: <tt class="docutils literal"><span class="pre">None</span></tt> or
a list of headers names. Defaults to
<tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">X_EXPOSE_HEADERS</span></tt></td>
<td>CORS (Cross-Origin Resource Sharing) support.
Allows API maintainers to specify which
headers are exposed within a CORS response.
Allowed values are: <tt class="docutils literal"><span class="pre">None</span></tt> or
a list of headers names. Defaults to
<tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">X_ALLOW_CREDENTIALS</span></tt></td>
<td>CORS (Cross-Origin Resource Sharing) support.
Allows API maintainers to specify if cookies can
be sent by clients.
The only allowed value is: <tt class="docutils literal"><span class="pre">True</span></tt>, any other
will be ignored. Defaults to
<tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">X_MAX_AGE</span></tt></td>
<td>CORS (Cross-Origin Resource Sharing)
support. Allows to set max age for the
access control allow header. Defaults to
21600.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">LAST_UPDATED</span></tt></td>
<td>Name of the field used to record a document&#8217;s
last update date. This field is
automatically handled by Eve. Defaults to
<tt class="docutils literal"><span class="pre">_updated</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DATE_CREATED</span></tt></td>
<td>Name for the field used to record a document
creation date. This field is automatically
handled by Eve. Defaults to <tt class="docutils literal"><span class="pre">_created</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ID_FIELD</span></tt></td>
<td>Name of the field used to uniquely identify
resource items within the database. You
want this field to be properly indexed on
the database. Can be overridden by resource
settings. Defaults to <tt class="docutils literal"><span class="pre">_id</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ITEM_LOOKUP</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> if item endpoints should be generally
available across the API, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. Can be overridden by resource
settings. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ITEM_LOOKUP_FIELD</span></tt></td>
<td>Document field used when looking up a resource
item. Can be overridden by resource
settings. Defaults to <tt class="docutils literal"><span class="pre">ID_FIELD</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ITEM_URL</span></tt></td>
<td>URL rule used to construct default item
endpoint URLs. Can be overridden by
resource settings. Defaults
<tt class="docutils literal"><span class="pre">regex(&quot;[a-f0-9]{24}&quot;)</span></tt> which is MongoDB
standard <tt class="docutils literal"><span class="pre">Object_Id</span></tt> format.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ITEM_TITLE</span></tt></td>
<td>Title to be used when building item references,
both in XML and JSON responses. Defaults to
resource name, with the plural &#8216;s&#8217; stripped
if present. Can and most likely will be
overridden when configuring single resource
endpoints.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AUTH_FIELD</span></tt></td>
<td>Enables <a class="reference internal" href="authentication.html#user-restricted"><em>User-Restricted Resource Access</em></a>. When the
feature is enabled, users can only
read/update/delete resource items created
by themselves. The keyword contains the
actual name of the field used to store the
id of the user who created the resource
item. Can be overridden by resource
settings. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>, which
disables the feature.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ALLOW_UNKNOWN</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option will allow insertion
of arbitrary, unknown fields to any API
endpoint. Use with caution. See
<a class="reference internal" href="validation.html#unknown"><em>Allowing the Unknown</em></a> for more information.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">PROJECTION</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option enables the
<a class="reference internal" href="features.html#projections"><em>Projections</em></a> feature. Can be
overridden by resource settings. Defaults
to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">EMBEDDING</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option enables the
<a class="reference internal" href="features.html#embedded-docs"><em>Embedded Resource Serialization</em></a> feature. Defaults to
<tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">BANDWIDTH_SAVER</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, POST, PUT, and PATCH responses
only return automatically handled fields
and <tt class="docutils literal"><span class="pre">EXTRA_RESPONSE_FIELDS</span></tt>. When
<tt class="docutils literal"><span class="pre">False</span></tt>, the entire document will be
sent. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">EXTRA_RESPONSE_FIELDS</span></tt></td>
<td>Allows to configure a list of additional
document fields that should be provided
with every POST response. Normally only
automatically handled fields (<tt class="docutils literal"><span class="pre">ID_FIELD</span></tt>,
<tt class="docutils literal"><span class="pre">LAST_UPDATED</span></tt>, <tt class="docutils literal"><span class="pre">DATE_CREATED</span></tt>,
<tt class="docutils literal"><span class="pre">ETAG</span></tt>) are included in response
payloads. Can be overridden by resource
settings. Defaults to <tt class="docutils literal"><span class="pre">[]</span></tt>, effectively
disabling the feature.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">RATE_LIMIT_GET</span></tt></td>
<td>A tuple expressing the rate limit on GET
requests. The first element of the tuple is
the number of requests allowed, while the
second is the time window in seconds. For
example, <tt class="docutils literal"><span class="pre">(300,</span> <span class="pre">60</span> <span class="pre">*</span> <span class="pre">15)</span></tt> would set
a limit of 300 requests every 15 minutes.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RATE_LIMIT_POST</span></tt></td>
<td>A tuple expressing the rate limit on POST
requests. The first element of the tuple is
the number of requests allowed, while the
second is the time window in seconds. For
example <tt class="docutils literal"><span class="pre">(300,</span> <span class="pre">60</span> <span class="pre">*</span> <span class="pre">15)</span></tt> would set
a limit of 300 requests every 15 minutes.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">RATE_LIMIT_PATCH</span></tt></td>
<td>A tuple expressing the rate limit on PATCH
requests. The first element of the tuple is
the number of requests allowed, while the
second is the time window in seconds. For
example <tt class="docutils literal"><span class="pre">(300,</span> <span class="pre">60</span> <span class="pre">*</span> <span class="pre">15)</span></tt> would set
a limit of 300 requests every 15 minutes.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RATE_LIMIT_DELETE</span></tt></td>
<td>A tuple expressing the rate limit on DELETE
requests. The first element of the tuple is
the number of requests allowed, while the
second is the time window in seconds. For
example <tt class="docutils literal"><span class="pre">(300,</span> <span class="pre">60</span> <span class="pre">*</span> <span class="pre">15)</span></tt> would set
a limit of 300 requests every 15 minutes. Defaults to
<tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">DEBUG</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> to enable Debug Mode, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ERROR</span></tt></td>
<td>Allows to customize the error_code field. Defaults
to <tt class="docutils literal"><span class="pre">_error</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">HATEOAS</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">False</span></tt>, this option disables
<a class="reference internal" href="features.html#hateoas-feature"><em>HATEOAS</em></a>. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ISSUES</span></tt></td>
<td>Allows to customize the issues field. Defaults
to <tt class="docutils literal"><span class="pre">_issues</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">STATUS</span></tt></td>
<td>Allows to customize the status field. Defaults
to <tt class="docutils literal"><span class="pre">_status</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">STATUS_OK</span></tt></td>
<td>Status message returned when data validation is
successful. Defaults to <tt class="docutils literal"><span class="pre">OK</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">STATUS_ERR</span></tt></td>
<td>Status message returned when data validation
failed. Defaults to <tt class="docutils literal"><span class="pre">ERR</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ITEMS</span></tt></td>
<td>Allows to customize the items field. Defaults
to <tt class="docutils literal"><span class="pre">_items</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">META</span></tt></td>
<td>Allows to customize the meta field. Defaults
to <tt class="docutils literal"><span class="pre">_meta</span></tt>
to <tt class="docutils literal"><span class="pre">_meta</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">INFO</span></tt></td>
<td>String value to include an info section, with the
given INFO name, at the Eve homepage (suggested
value <tt class="docutils literal"><span class="pre">_info</span></tt>). The info section will include
Eve server version and API version (API_VERSION,
if set).  <tt class="docutils literal"><span class="pre">None</span></tt> otherwise, if you do not want
to expose any server info. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">LINKS</span></tt></td>
<td>Allows to customize the links field. Defaults
to <tt class="docutils literal"><span class="pre">_links</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ETAG</span></tt></td>
<td>Allows to customize the etag field. Defaults
to <tt class="docutils literal"><span class="pre">_etag</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">IF_MATCH</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> to enable concurrency control, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>. See
<a class="reference internal" href="features.html#concurrency"><em>Data Integrity and Concurrency Control</em></a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ENFORCE_IF_MATCH</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> to always enforce concurrency control when
it is enabled, <tt class="docutils literal"><span class="pre">False</span></tt> otherwise. Defaults to
<tt class="docutils literal"><span class="pre">True</span></tt>. See <a class="reference internal" href="features.html#concurrency"><em>Data Integrity and Concurrency Control</em></a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">XML</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> to enable XML support, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. See <a class="reference internal" href="features.html#jsonxml"><em>JSON and XML Rendering</em></a>. Defaults to
<tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">JSON</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> to enable JSON support, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. See <a class="reference internal" href="features.html#jsonxml"><em>JSON and XML Rendering</em></a>. Defaults to
<tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">JSON_SORT_KEYS</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> to enable JSON key sorting, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">JSON_REQUEST_CONTENT_TYPES</span></tt></td>
<td>Supported JSON content types. Useful when
you need support for vendor-specific json
types. Please note: responses will still
carry the standard <tt class="docutils literal"><span class="pre">application/json</span></tt>
type. Defaults to <tt class="docutils literal"><span class="pre">['application/json']</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">VALIDATION_ERROR_STATUS</span></tt></td>
<td>The HTTP status code to use for validation errors.
Defaults to <tt class="docutils literal"><span class="pre">422</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">VERSIONING</span></tt></td>
<td>Enabled documents version control when
<tt class="docutils literal"><span class="pre">True</span></tt>. Can be overridden by resource
settings. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">VERSIONS</span></tt></td>
<td>Suffix added to the name of the primary
collection to create the name of the shadow
collection to store document versions.
Defaults to <tt class="docutils literal"><span class="pre">_versions</span></tt>. When
<tt class="docutils literal"><span class="pre">VERSIONING</span></tt> is enabled , a collection
such as <tt class="docutils literal"><span class="pre">myresource_versions</span></tt> would be
created for a resource with a datasource of
<tt class="docutils literal"><span class="pre">myresource</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">VERSION_PARAM</span></tt></td>
<td>The URL query parameter used to access the
specific version of a document. Defaults to
<tt class="docutils literal"><span class="pre">version</span></tt>. Omit this parameter to get the
latest version of a document or use
<cite>?version=all`</cite> to get a list of all
version of the document. Only valid for
individual item endpoints.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">VERSION</span></tt></td>
<td>Field used to store the version number of a
document. Defaults to <tt class="docutils literal"><span class="pre">_version</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">LATEST_VERSION</span></tt></td>
<td>Field used to store the latest version number
of a document. Defaults to
<tt class="docutils literal"><span class="pre">_latest_version</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">VERSION_ID_SUFFIX</span></tt></td>
<td>Used in the shadow collection to store the
document id. Defaults to <tt class="docutils literal"><span class="pre">_document</span></tt>. If
<tt class="docutils literal"><span class="pre">ID_FIELD</span></tt> is set to <tt class="docutils literal"><span class="pre">_id</span></tt>, the
document id will be stored in field
<tt class="docutils literal"><span class="pre">_id_document</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MONGO_URI</span></tt></td>
<td>A <a class="reference external" href="http://docs.mongodb.org/manual/reference/connection-string/#Connections-StandardConnectionStringFormat">MongoDB URI</a> which is used in preference
of the other configuration variables.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MONGO_HOST</span></tt></td>
<td>MongoDB server address. Defaults to <tt class="docutils literal"><span class="pre">localhost</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MONGO_PORT</span></tt></td>
<td>MongoDB port. Defaults to <tt class="docutils literal"><span class="pre">27017</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MONGO_USERNAME</span></tt></td>
<td>MongoDB user name.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MONGO_PASSWORD</span></tt></td>
<td>MongoDB password.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MONGO_DBNAME</span></tt></td>
<td>MongoDB database name.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MONGO_OPTIONS</span></tt></td>
<td>MongoDB keyword arguments to passed to
MongoClient class <tt class="docutils literal"><span class="pre">__init__</span></tt>.
Defaults to <tt class="docutils literal"><span class="pre">{'connect':</span> <span class="pre">True,</span> <span class="pre">'tz_aware':</span> <span class="pre">True,</span> <span class="pre">'appname':</span> <span class="pre">'flask_app_name'}</span></tt>.
See <a class="reference external" href="http://api.mongodb.com/python/current/api/pymongo/mongo_client.html">PyMongo mongo_client</a> for reference.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MONGO_AUTH_SOURCE</span></tt></td>
<td>MongoDB authorization database. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MONGO_AUTH_MECHANISM</span></tt></td>
<td>MongoDB authentication mechanism.
See <a class="reference external" href="https://docs.mongodb.com/v3.0/core/authentication-mechanisms/">PyMongo Authentication Mechanisms</a>.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MONGO_AUTH_MECHANISM_PROPERTIES</span></tt></td>
<td>Specify MongoDB extra authentication mechanism properties
if required. Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MONGO_QUERY_BLACKLIST</span></tt></td>
<td><p class="first">A list of Mongo query operators that are not
allowed to be used in resource filters
(<tt class="docutils literal"><span class="pre">?where=</span></tt>). Defaults to <tt class="docutils literal"><span class="pre">['$where',</span>
<span class="pre">'$regex']</span></tt>.</p>
<p class="last">Mongo JavaScript operators are disabled by
default, as they might be used as vectors
for injection attacks. Javascript queries
also tend to be slow and generally can be
easily replaced with the (very rich) Mongo
query dialect.</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MONGO_WRITE_CONCERN</span></tt></td>
<td><p class="first">A dictionary defining MongoDB write concern
settings. All standard write concern
settings (w, wtimeout, j, fsync) are
supported. Defaults to <tt class="docutils literal"><span class="pre">{'w':</span> <span class="pre">1}</span></tt>, which
means &#8216;do regular acknowledged writes&#8217;
(this is also the Mongo default).</p>
<p>Please be aware that setting &#8216;w&#8217; to a value of
2 or greater requires replication to be
active or you will be getting 500 errors
(the write will still happen; Mongo will
just be unable to check that it&#8217;s being
written to multiple servers).</p>
<p class="last">Can be overridden at endpoint (Mongo
collection) level. See
<tt class="docutils literal"><span class="pre">mongo_write_concern</span></tt> below.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">DOMAIN</span></tt></td>
<td>A dict holding the API domain definition.
See <a class="reference internal" href="#domain-configuration">Domain Configuration</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">EXTENDED_MEDIA_INFO</span></tt></td>
<td>A list of properties to forward from the file upload
driver.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">RETURN_MEDIA_AS_BASE64_STRING</span></tt></td>
<td>Controls the embedding of the media type in
the endpoint response. This is useful when
you have other means of getting the binary
(like custom Flask endpoints) but still
want clients to be able to POST/PATCH it.
Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">RETURN_MEDIA_AS_URL</span></tt></td>
<td>Set it to <tt class="docutils literal"><span class="pre">True</span></tt> to enable serving media
files at a dedicated media endpoint.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MEDIA_BASE_URL</span></tt></td>
<td>Base URL to be used when
<tt class="docutils literal"><span class="pre">RETURN_MEDIA_AS_URL</span></tt> is active. Combined
with <tt class="docutils literal"><span class="pre">MEDIA_ENDPOINT</span></tt> and <tt class="docutils literal"><span class="pre">MEDIA_URL</span></tt>
dictates the URL returned for media files.
If <tt class="docutils literal"><span class="pre">None</span></tt>, which is the default value,
the API base address will be used instead.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MEDIA_ENDPOINT</span></tt></td>
<td>The media endpoint to be used when
<tt class="docutils literal"><span class="pre">RETURN_MEDIA_AS_URL</span></tt> is enabled.
Defaults to <tt class="docutils literal"><span class="pre">media</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">MEDIA_URL</span></tt></td>
<td>Format of a file url served at the
dedicated media endpoints. Defaults to
<tt class="docutils literal"><span class="pre">regex(&quot;[a-f0-9]{24}&quot;)</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">MULTIPART_FORM_FIELDS_AS_JSON</span></tt></td>
<td>In case you are submitting your resource as
<tt class="docutils literal"><span class="pre">multipart/form-data</span></tt> all form data fields
will be submitted as strings, breaking any
validation rules you might have on the
resource fields. If you want to treat all
submitted form data as JSON strings you will
have to activate this setting. In that case
field validation will continue working
correctly. Read more about how the fields
should be formatted at
<a class="reference internal" href="features.html#multipart"><em>Note on media files as multipart/data-form</em></a>. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">AUTO_COLLAPSE_MULTI_KEYS</span></tt></td>
<td><p class="first">If set to <tt class="docutils literal"><span class="pre">True</span></tt>, multiple values sent
with the same key, submitted using the
<tt class="docutils literal"><span class="pre">application/x-www-form-urlencoded</span></tt> or
<tt class="docutils literal"><span class="pre">multipart/form-data</span></tt> content types,
will automatically be converted to a list of
values.</p>
<p>When using this together with
<tt class="docutils literal"><span class="pre">AUTO_CREATE_LISTS</span></tt> it becomes possible
to use lists of media fields.</p>
<p class="last">Defaults to <tt class="docutils literal"><span class="pre">False</span></tt></p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">AUTO_CREATE_LISTS</span></tt></td>
<td><p class="first">When submitting a non <tt class="docutils literal"><span class="pre">list</span></tt> type value
for a field with type <tt class="docutils literal"><span class="pre">list</span></tt>,
automatically create a one element list
before running the validators.</p>
<p class="last">Defaults to <tt class="docutils literal"><span class="pre">False</span></tt></p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">OPLOG</span></tt></td>
<td>Set it to <tt class="docutils literal"><span class="pre">True</span></tt> to enable the <a class="reference internal" href="features.html#oplog"><em>Operations Log</em></a>.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">OPLOG_NAME</span></tt></td>
<td>This is the name of the database collection
where the <a class="reference internal" href="features.html#oplog"><em>Operations Log</em></a> is stored. Defaults
to <tt class="docutils literal"><span class="pre">oplog</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">OPLOG_METHODS</span></tt></td>
<td>List of HTTP methods which operations
should be logged in the <a class="reference internal" href="features.html#oplog"><em>Operations Log</em></a>.
Defaults to <tt class="docutils literal"><span class="pre">['DELETE',</span> <span class="pre">'POST',</span> <span class="pre">'PATCH',</span>
<span class="pre">'PUT']</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">OPLOG_CHANGE_METHODS</span></tt></td>
<td>List of HTTP methods which operations
will include changes into the <a class="reference internal" href="features.html#oplog"><em>Operations Log</em></a> entry.
Defaults to <tt class="docutils literal"><span class="pre">['DELETE','PATCH',</span> <span class="pre">'PUT']</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">OPLOG_ENDPOINT</span></tt></td>
<td>Name of the <a class="reference internal" href="features.html#oplog"><em>Operations Log</em></a> endpoint. If the
endpoint is enabled it can be configured
like any other API endpoint. Set it to
<tt class="docutils literal"><span class="pre">None</span></tt> to disable the endpoint. Defaults
to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">OPLOG_AUDIT</span></tt></td>
<td>Set it to <tt class="docutils literal"><span class="pre">True</span></tt> to enable the audit
feature. When audit is enabled client IP
and document changes are also logged to the
<a class="reference internal" href="features.html#oplog"><em>Operations Log</em></a>. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">OPLOG_RETURN_EXTRA_FIELD</span></tt></td>
<td>When enabled, the optional <tt class="docutils literal"><span class="pre">extra</span></tt> field
will be included in the payload returned by
the <tt class="docutils literal"><span class="pre">OPLOG_ENDPOINT</span></tt>. Defaults to
<tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">SCHEMA_ENDPOINT</span></tt></td>
<td>Name of the <a class="reference internal" href="features.html#schema-endpoint"><em>The Schema Endpoint</em></a>. Defaults
to <tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">HEADER_TOTAL_COUNT</span></tt></td>
<td>Custom header containing total count of
items in response payloads for collection
<tt class="docutils literal"><span class="pre">GET</span></tt> requests. This is handy for <tt class="docutils literal"><span class="pre">HEAD</span></tt>
requests when client wants to know items
count without retrieving response body.
An example use case is to get the count
of unread posts using <tt class="docutils literal"><span class="pre">where</span></tt> query without
loading posts themselves. Defaults to
<tt class="docutils literal"><span class="pre">X-Total-Count</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">JSONP_ARGUMENT</span></tt></td>
<td>This option will cause the response to be
wrapped in a JavaScript function call if
the argument is set in the request. For
example if you set <tt class="docutils literal"><span class="pre">JSON_ARGUMENT</span>
<span class="pre">=</span> <span class="pre">'callback'</span></tt>, then all responses to
<tt class="docutils literal"><span class="pre">?callback=funcname</span></tt> requests will be
wrapped in a <tt class="docutils literal"><span class="pre">funcname</span></tt> call. Defaults to
<tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">BULK_ENABLED</span></tt></td>
<td>Enables bulk insert when set to <tt class="docutils literal"><span class="pre">True</span></tt>.
See <a class="reference internal" href="features.html#bulk-insert"><em>Bulk Inserts</em></a> for more
information. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">SOFT_DELETE</span></tt></td>
<td>Enables soft delete when set to <tt class="docutils literal"><span class="pre">True</span></tt>.
See <a class="reference internal" href="features.html#soft-delete"><em>Soft Delete</em></a> for more
information. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">DELETED</span></tt></td>
<td>Field name used to indicate if a document
has been deleted when <tt class="docutils literal"><span class="pre">SOFT_DELETE</span></tt>
is enabled. Defaults to <tt class="docutils literal"><span class="pre">_deleted</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">SHOW_DELETED_PARAM</span></tt></td>
<td>The URL query parameter used to include
soft deleted items in resource level GET
responses. Defaults to &#8216;show_deleted&#8217;.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">STANDARD_ERRORS</span></tt></td>
<td>This is a list of HTTP error codes for
which a standard API response will be
provided. Canonical error response includes
a JSON body with actual error code and
description. Set this to an empty list if
you want to disable canonical responses
altogether. Defaults to <tt class="docutils literal"><span class="pre">[400,</span> <span class="pre">401,</span> <span class="pre">403,</span>
<span class="pre">404,</span> <span class="pre">405,</span> <span class="pre">406,</span> <span class="pre">409,</span> <span class="pre">410,</span> <span class="pre">412,</span> <span class="pre">422,</span> <span class="pre">428]</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">VALIDATION_ERROR_AS_STRING</span></tt></td>
<td>If <tt class="docutils literal"><span class="pre">True</span></tt> even single field errors will
be returned in a list. By default single
field errors are returned as strings while
multiple field errors are bundled in a
list. If you want to standardize the field
errors output, set this setting to <tt class="docutils literal"><span class="pre">True</span></tt>
and you will always get a list of field
issues. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">UPSERT_ON_PUT</span></tt></td>
<td><tt class="docutils literal"><span class="pre">PUT</span></tt> attempts to create a document if it
does not exist. The URL endpoint will be
used as <tt class="docutils literal"><span class="pre">ID_FIELD</span></tt> value (if <tt class="docutils literal"><span class="pre">ID_FIELD</span></tt>
is included with the payload, it will be
ignored). Normal validation rules apply.
The response will be a <tt class="docutils literal"><span class="pre">201</span> <span class="pre">Created</span></tt> on
successful creation. Response payload will
be identical the one you would get by
performing a single document POST to the
resource endpoint. Set to <tt class="docutils literal"><span class="pre">False</span></tt> to
disable this feature, and a <tt class="docutils literal"><span class="pre">404</span></tt> will be
returned instead. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="domain-configuration">
<span id="domain"></span><h2>Domain Configuration<a class="headerlink" href="#domain-configuration" title="Permalink to this headline">¶</a></h2>
<p>In Eve terminology, a <cite>domain</cite> is the definition of the API structure, the area
where you design your API, fine-tune resources endpoints, and define validation
rules.</p>
<p><tt class="docutils literal"><span class="pre">DOMAIN</span></tt> is a <a class="reference internal" href="#global"><em>global configuration setting</em></a>: a Python
dictionary where keys are API resources and values their definitions.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># Here we define two API endpoints, &#39;people&#39; and &#39;works&#39;, leaving their</span>
<span class="c"># definitions empty.</span>
<span class="n">DOMAIN</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;people&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s">&#39;works&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the following two sections, we will customize the <cite>people</cite> resource.</p>
<div class="section" id="resource-item-endpoints">
<span id="local"></span><h3>Resource / Item Endpoints<a class="headerlink" href="#resource-item-endpoints" title="Permalink to this headline">¶</a></h3>
<p>Endpoint customization is mostly done by overriding some <a class="reference internal" href="#global"><em>global settings</em></a>, but other unique settings are also available. Resource settings are
always lowercase.</p>
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">url</span></tt></td>
<td><p class="first">The endpoint URL. If omitted the resource key
of the <tt class="docutils literal"><span class="pre">DOMAIN</span></tt> dict will be used to build
the URL. As an example, <tt class="docutils literal"><span class="pre">contacts</span></tt> would make
the <cite>people</cite> resource available at
<tt class="docutils literal"><span class="pre">/contacts</span></tt> (instead of <tt class="docutils literal"><span class="pre">/people</span></tt>). URL can
be as complex as needed and can be nested
relative to another API endpoint (you can have
a <tt class="docutils literal"><span class="pre">/contacts</span></tt> endpoint and then
a <tt class="docutils literal"><span class="pre">/contacts/overseas</span></tt> endpoint. Both are
independent of each other and freely
configurable).</p>
<p class="last">You can also use regexes to setup
subresource-like endpoints. See
<a class="reference internal" href="features.html#subresources"><em>Sub Resources</em></a>.</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allowed_filters</span></tt></td>
<td><p class="first">List of fields on which filtering is allowed.
Can be set to <tt class="docutils literal"><span class="pre">[]</span></tt> (no filters allowed), or
<tt class="docutils literal"><span class="pre">['*']</span></tt> (fields allowed on every field).
Defaults to <tt class="docutils literal"><span class="pre">['*']</span></tt>.</p>
<p class="last"><em>Please note:</em> If API scraping or DB DoS
attacks are a concern, then globally disabling
filters (see <tt class="docutils literal"><span class="pre">ALLOWED_FILTERS</span></tt> above) and
then whitelisting valid ones at the local level
is the way to go.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">sorting</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> if sorting is enabled, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. Locally overrides <tt class="docutils literal"><span class="pre">SORTING</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">pagination</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> if pagination is enabled, <tt class="docutils literal"><span class="pre">False</span></tt>
otherwise. Locally overrides <tt class="docutils literal"><span class="pre">PAGINATION</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">resource_methods</span></tt></td>
<td><p class="first">A list of HTTP methods supported at resource
endpoint. Allowed values: <tt class="docutils literal"><span class="pre">GET</span></tt>, <tt class="docutils literal"><span class="pre">POST</span></tt>,
<tt class="docutils literal"><span class="pre">DELETE</span></tt>. Locally overrides
<tt class="docutils literal"><span class="pre">RESOURCE_METHODS</span></tt>.</p>
<p class="last"><em>Please note:</em> if you&#8217;re running version 0.0.5
or earlier use the now unsupported <tt class="docutils literal"><span class="pre">methods</span></tt>
keyword instead.</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">public_methods</span></tt></td>
<td>A list of HTTP methods supported at resource
endpoint, open to public access even when
<a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> is enabled. Locally overrides
<tt class="docutils literal"><span class="pre">PUBLIC_METHODS</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">item_methods</span></tt></td>
<td>A list of HTTP methods supported at item
endpoint. Allowed values: <tt class="docutils literal"><span class="pre">GET</span></tt>, <tt class="docutils literal"><span class="pre">PATCH</span></tt>,
<tt class="docutils literal"><span class="pre">PUT</span></tt> and <tt class="docutils literal"><span class="pre">DELETE</span></tt>. <tt class="docutils literal"><span class="pre">PATCH</span></tt> or, for
clients not supporting PATCH, <tt class="docutils literal"><span class="pre">POST</span></tt> with
the <tt class="docutils literal"><span class="pre">X-HTTP-Method-Override</span></tt> header tag.
Locally overrides <tt class="docutils literal"><span class="pre">ITEM_METHODS</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">public_item_methods</span></tt></td>
<td>A list of HTTP methods supported at item
endpoint, left open to public access when
<a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> is enabled. Locally overrides
<tt class="docutils literal"><span class="pre">PUBLIC_ITEM_METHODS</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">allowed_roles</span></tt></td>
<td>A list of allowed <cite>roles</cite> for resource
endpoint. See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more
information. Locally overrides
<tt class="docutils literal"><span class="pre">ALLOWED_ROLES</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allowed_read_roles</span></tt></td>
<td>A list of allowed <cite>roles</cite> for resource
endpoint with GET and OPTIONS methods.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more
information. Locally overrides
<tt class="docutils literal"><span class="pre">ALLOWED_READ_ROLES</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">allowed_write_roles</span></tt></td>
<td>A list of allowed <cite>roles</cite> for resource
endpoint with POST, PUT and DELETE.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more
information. Locally overrides
<tt class="docutils literal"><span class="pre">ALLOWED_WRITE_ROLES</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allowed_item_read_roles</span></tt></td>
<td>A list of allowed <cite>roles</cite> for item endpoint
with GET and OPTIONS methods.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more information.
Locally overrides <tt class="docutils literal"><span class="pre">ALLOWED_ITEM_READ_ROLES</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">allowed_item_write_roles</span></tt></td>
<td>A list of allowed <cite>roles</cite> for item endpoint
with PUT, PATH and DELETE methods.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more information.
Locally overrides <tt class="docutils literal"><span class="pre">ALLOWED_ITEM_WRITE_ROLES</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allowed_item_roles</span></tt></td>
<td>A list of allowed <cite>roles</cite> for item endpoint.
See <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> for more information.
Locally overrides <tt class="docutils literal"><span class="pre">ALLOWED_ITEM_ROLES</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">cache_control</span></tt></td>
<td>Value of the <tt class="docutils literal"><span class="pre">Cache-Control</span></tt> header field
used when serving <tt class="docutils literal"><span class="pre">GET</span></tt> requests. Leave empty
if you don&#8217;t want to include cache directives
with API responses. Locally overrides
<tt class="docutils literal"><span class="pre">CACHE_CONTROL</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">cache_expires</span></tt></td>
<td>Value (in seconds) of the <tt class="docutils literal"><span class="pre">Expires</span></tt> header
field used when serving <tt class="docutils literal"><span class="pre">GET</span></tt> requests. If
set to a non-zero value, the header will
always be included, regardless of the setting
of <tt class="docutils literal"><span class="pre">CACHE_CONTROL</span></tt>. Locally overrides
<tt class="docutils literal"><span class="pre">CACHE_EXPIRES</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">id_field</span></tt></td>
<td>Field used to uniquely identify resource items
within the database. Locally overrides
<tt class="docutils literal"><span class="pre">ID_FIELD</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">item_lookup</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt> if item endpoint should be available,
<tt class="docutils literal"><span class="pre">False</span></tt> otherwise. Locally overrides
<tt class="docutils literal"><span class="pre">ITEM_LOOKUP</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">item_lookup_field</span></tt></td>
<td>Field used when looking up a resource
item. Locally overrides <tt class="docutils literal"><span class="pre">ITEM_LOOKUP_FIELD</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">item_url</span></tt></td>
<td>Rule used to construct item endpoint URL.
Locally overrides <tt class="docutils literal"><span class="pre">ITEM_URL</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">resource_title</span></tt></td>
<td>Title used when building resource links
(HATEOAS). Defaults to resource&#8217;s <tt class="docutils literal"><span class="pre">url</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">item_title</span></tt></td>
<td>Title to be used when building item references,
both in XML and JSON responses. Overrides
<tt class="docutils literal"><span class="pre">ITEM_TITLE</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">additional_lookup</span></tt></td>
<td>Besides the standard item endpoint which
defaults to <tt class="docutils literal"><span class="pre">/&lt;resource&gt;/&lt;ID_FIELD_value&gt;</span></tt>,
you can optionally define a secondary,
read-only, endpoint like
<tt class="docutils literal"><span class="pre">/&lt;resource&gt;/&lt;person_name&gt;</span></tt>. You do so by
defining a dictionary comprised of two items
<cite>field</cite> and <cite>url</cite>. The former is the name of
the field used for the lookup. If the field
type (as defined in the resource <a class="reference internal" href="#schema">schema</a>) is
a string, then you put a URL rule in <cite>url</cite>.  If
it is an integer, then you just omit <cite>url</cite>, as
it is automatically handled.  See the code
snippet below for an usage example of this
feature.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">datasource</span></tt></td>
<td>Explicitly links API resources to database
collections. See <a class="reference internal" href="#advanced-datasource-patterns">Advanced Datasource
Patterns</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">auth_field</span></tt></td>
<td>Enables <a class="reference internal" href="authentication.html#user-restricted"><em>User-Restricted Resource Access</em></a>. When the
feature is enabled, users can only
read/update/delete resource items created by
themselves. The keyword contains the actual
name of the field used to store the id of
the user who created the resource item. Locally
overrides <tt class="docutils literal"><span class="pre">AUTH_FIELD</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allow_unknown</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option will allow insertion
of arbitrary, unknown fields to the endpoint.
Use with caution. Locally overrides
<tt class="docutils literal"><span class="pre">ALLOW_UNKNOWN</span></tt>. See <a class="reference internal" href="validation.html#unknown"><em>Allowing the Unknown</em></a> for more
information. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">transparent_schema_rules</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option disables
<a class="reference internal" href="validation.html#schema-validation"><em>Schema validation</em></a> for the endpoint.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">projection</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option enables the
<a class="reference internal" href="features.html#projections"><em>Projections</em></a> feature. Locally overrides
<tt class="docutils literal"><span class="pre">PROJECTION</span></tt>. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">embedding</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt> this option enables the
<a class="reference internal" href="features.html#embedded-docs"><em>Embedded Resource Serialization</em></a> feature. Defaults to
<tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">extra_response_fields</span></tt></td>
<td>Allows to configure a list of additional
document fields that should be provided with
every POST response. Normally only
automatically handled fields (<tt class="docutils literal"><span class="pre">ID_FIELD</span></tt>,
<tt class="docutils literal"><span class="pre">LAST_UPDATED</span></tt>, <tt class="docutils literal"><span class="pre">DATE_CREATED</span></tt>, <tt class="docutils literal"><span class="pre">ETAG</span></tt>)
are included in response payloads. Overrides
<tt class="docutils literal"><span class="pre">EXTRA_RESPONSE_FIELDS</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">hateoas</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">False</span></tt>, this option disables
<a class="reference internal" href="features.html#hateoas-feature"><em>HATEOAS</em></a> for the resource.
Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mongo_write_concern</span></tt></td>
<td><p class="first">A dictionary defining MongoDB write concern
settings for the endpoint datasource. All
standard write concern settings (w, wtimeout, j,
fsync) are supported. Defaults to <tt class="docutils literal"><span class="pre">{'w':</span> <span class="pre">1}</span></tt>
which means &#8216;do regular acknowledged writes&#8217;
(this is also the Mongo default.)</p>
<p class="last">Please be aware that setting &#8216;w&#8217; to a value of
2 or greater requires replication to be active
or you will be getting 500 errors (the write
will still happen; Mongo will just be unable
to check that it&#8217;s being written to multiple
servers.)</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">mongo_prefix</span></tt></td>
<td><p class="first">Allows overriding of the default <tt class="docutils literal"><span class="pre">MONGO</span></tt>
prefix, which is used when retrieving MongoDB
settings from configuration.</p>
<p>For example if <tt class="docutils literal"><span class="pre">mongo_prefix</span></tt> is set to
<tt class="docutils literal"><span class="pre">MONGO2</span></tt> then, when serving requests for the
endpoint, <tt class="docutils literal"><span class="pre">MONGO2</span></tt> prefixed settings will
be used to access the database.</p>
<p>This allows for eventually serving data from
a different database/server at every endpoint.</p>
<p class="last">See also: <a class="reference internal" href="authentication.html#authdrivendb"><em>Auth-driven Database Access</em></a>.</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">mongo_indexes</span></tt></td>
<td><p class="first">Allows to specify a set of indexes to be
created for this resource before the app is
launched.</p>
<p>Indexes are expressed as a dict where keys are
index names and values are either a list of
tuples of (field, direction) pairs, or
a tuple with a list of field/direction pairs
<em>and</em> index options expressed as a dict, such
as <tt class="docutils literal"><span class="pre">{'index</span> <span class="pre">name':</span> <span class="pre">[('field',</span> <span class="pre">1)],</span> <span class="pre">'index</span> <span class="pre">with</span>
<span class="pre">args':</span> <span class="pre">([('field',</span> <span class="pre">1)],</span> <span class="pre">{&quot;sparse&quot;:</span> <span class="pre">True})}</span></tt>.</p>
<p>Multiple pairs are used to create compound
indexes. Direction takes all kind of values
supported by PyMongo, such as <tt class="docutils literal"><span class="pre">ASCENDING</span></tt>
= 1 and <tt class="docutils literal"><span class="pre">DESCENDING</span></tt> = -1. All index options
such as <tt class="docutils literal"><span class="pre">sparse</span></tt>, <tt class="docutils literal"><span class="pre">min</span></tt>, <tt class="docutils literal"><span class="pre">max</span></tt>,
etc. are supported (see <a class="reference external" href="http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.create_index">PyMongo</a> documentation.)</p>
<p class="last"><em>Please note:</em> keep in mind that index design,
creation and maintenance is a very important
task and should be planned and executed with
great care. Usually it is also a very resource
intensive operation. You might therefore want
to handle this task manually, out of the
context of API instantiation. Also remember
that, by default, any already exsistent index
for which the definition has been changed, will
be dropped and re-created.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">authentication</span></tt></td>
<td>A class with the authorization logic for the
endpoint. If not provided the eventual
general purpose auth class (passed as
application constructor argument) will be used.
For details on authentication and authorization
see <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a>.  Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>,</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">embedded_fields</span></tt></td>
<td>A list of fields for which <a class="reference internal" href="features.html#embedded-docs"><em>Embedded Resource Serialization</em></a>
is enabled by default. For this feature to work
properly fields in the list must be
<tt class="docutils literal"><span class="pre">embeddable</span></tt>, and <tt class="docutils literal"><span class="pre">embedding</span></tt> must be
active for the resource.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">query_objectid_as_string</span></tt></td>
<td>When enabled the Mongo parser will avoid
automatically casting electable strings to
ObjectIds. This can be useful in those rare
occurrences where you have string fields in the
database whose values can actually be casted to
ObjectId values, but shouldn&#8217;t. It effects
queries (<tt class="docutils literal"><span class="pre">?where=</span></tt>) and parsing of payloads.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">internal_resource</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt>, this option makes the resource
internal. No HTTP action can be performed on
the endpoint, which is still accessible from
the Eve data layer. See
<a class="reference internal" href="features.html#internal-resources"><em>Internal Resources</em></a> for more
informations. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">etag_ignore_fields</span></tt></td>
<td>List of fields that
should not be used to compute the ETag value.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt> which means that by
default all fields are included in the computation.
It looks like <tt class="docutils literal"><span class="pre">['field1',</span> <span class="pre">'field2',</span>
<span class="pre">'field3.nested_field',</span> <span class="pre">...]</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">schema</span></tt></td>
<td>A dict defining the actual data structure being
handled by the resource. Enables data
validation. See <a class="reference internal" href="#schema-definition">Schema Definition</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">bulk_enabled</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt> this option enables the
<a class="reference internal" href="features.html#bulk-insert"><em>Bulk Inserts</em></a> feature for this resource.
Locally overrides <tt class="docutils literal"><span class="pre">BULK_ENABLED</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">soft_delete</span></tt></td>
<td>When <tt class="docutils literal"><span class="pre">True</span></tt> this option enables the
<a class="reference internal" href="features.html#soft-delete"><em>Soft Delete</em></a> feature for this resource.
Locally overrides <tt class="docutils literal"><span class="pre">SOFT_DELETE</span></tt>.</td>
</tr>
</tbody>
</table>
<p>Here&#8217;s an example of resource customization, mostly done by overriding global
API settings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c"># &#39;title&#39; tag used in item links. Defaults to the resource title minus</span>
    <span class="c"># the final, plural &#39;s&#39; (works fine in most cases but not for &#39;people&#39;)</span>
    <span class="s">&#39;item_title&#39;</span><span class="p">:</span> <span class="s">&#39;person&#39;</span><span class="p">,</span>

    <span class="c"># by default, the standard item entry point is defined as</span>
    <span class="c"># &#39;/people/&lt;ObjectId&gt;/&#39;. We leave it untouched, and we also enable an</span>
    <span class="c"># additional read-only entry point. This way consumers can also perform</span>
    <span class="c"># GET requests at &#39;/people/&lt;lastname&gt;&#39;.</span>
    <span class="s">&#39;additional_lookup&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;url&#39;</span><span class="p">:</span> <span class="s">&#39;regex(&quot;[\w]+&quot;)&#39;</span><span class="p">,</span>
        <span class="s">&#39;field&#39;</span><span class="p">:</span> <span class="s">&#39;lastname&#39;</span>
    <span class="p">},</span>

    <span class="c"># We choose to override global cache-control directives for this resource.</span>
    <span class="s">&#39;cache_control&#39;</span><span class="p">:</span> <span class="s">&#39;max-age=10,must-revalidate&#39;</span><span class="p">,</span>
    <span class="s">&#39;cache_expires&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>

    <span class="c"># we only allow GET and POST at this resource endpoint.</span>
    <span class="s">&#39;resource_methods&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;GET&#39;</span><span class="p">,</span> <span class="s">&#39;POST&#39;</span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="schema-definition">
<span id="schema"></span><h2>Schema Definition<a class="headerlink" href="#schema-definition" title="Permalink to this headline">¶</a></h2>
<p>Unless your API is read-only, you probably want to define resource <cite>schemas</cite>.
Schemas are important because they enable proper validation for incoming
streams.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># &#39;people&#39; schema definition</span>
<span class="s">&#39;schema&#39;</span><span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;firstname&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
        <span class="s">&#39;minlength&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;maxlength&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="s">&#39;lastname&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
        <span class="s">&#39;minlength&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="s">&#39;maxlength&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">,</span>
        <span class="s">&#39;required&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
        <span class="s">&#39;unique&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="c"># &#39;role&#39; is a list, and can only contain values from &#39;allowed&#39;.</span>
    <span class="s">&#39;role&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span>
        <span class="s">&#39;allowed&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&quot;author&quot;</span><span class="p">,</span> <span class="s">&quot;contributor&quot;</span><span class="p">,</span> <span class="s">&quot;copy&quot;</span><span class="p">],</span>
    <span class="p">},</span>
    <span class="c"># An embedded &#39;strongly-typed&#39; dictionary.</span>
    <span class="s">&#39;location&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span>
        <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">&#39;address&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span>
            <span class="s">&#39;city&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">}</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="s">&#39;born&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;datetime&#39;</span><span class="p">,</span>
    <span class="p">},</span>
<span class="p">}</span>
</pre></div>
</div>
<p>As you can see, schema keys are the actual field names, while values are dicts
defining the field validation rules. Allowed validation rules are:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">type</span></tt></td>
<td><p class="first">Field data type. Can be one of the following:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">string</span></tt></li>
<li><tt class="docutils literal"><span class="pre">boolean</span></tt></li>
<li><tt class="docutils literal"><span class="pre">integer</span></tt></li>
<li><tt class="docutils literal"><span class="pre">float</span></tt></li>
<li><tt class="docutils literal"><span class="pre">number</span></tt> (integer and float values allowed)</li>
<li><tt class="docutils literal"><span class="pre">datetime</span></tt></li>
<li><tt class="docutils literal"><span class="pre">dict</span></tt></li>
<li><tt class="docutils literal"><span class="pre">list</span></tt></li>
<li><tt class="docutils literal"><span class="pre">media</span></tt></li>
</ul>
<p>If the MongoDB data layer is used then
<tt class="docutils literal"><span class="pre">objectid</span></tt>, <tt class="docutils literal"><span class="pre">dbref</span></tt> and geographic data
structures are also allowed:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">objectid</span></tt></li>
<li><tt class="docutils literal"><span class="pre">dbref</span></tt></li>
<li><tt class="docutils literal"><span class="pre">point</span></tt></li>
<li><tt class="docutils literal"><span class="pre">multipoint</span></tt></li>
<li><tt class="docutils literal"><span class="pre">linestring</span></tt></li>
<li><tt class="docutils literal"><span class="pre">multilinestring</span></tt></li>
<li><tt class="docutils literal"><span class="pre">polygon</span></tt></li>
<li><tt class="docutils literal"><span class="pre">multipolygon</span></tt></li>
<li><tt class="docutils literal"><span class="pre">geometrycollection</span></tt></li>
<li><tt class="docutils literal"><span class="pre">decimal</span></tt></li>
</ul>
<p class="last">See <a class="reference internal" href="features.html#geojson-feature"><em>GeoJSON</em></a> for more
informations geo fields.</p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">required</span></tt></td>
<td>If <tt class="docutils literal"><span class="pre">True</span></tt>, the field is mandatory on
insertion.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">readonly</span></tt></td>
<td>If <tt class="docutils literal"><span class="pre">True</span></tt>, the field is readonly.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">minlength</span></tt>, <tt class="docutils literal"><span class="pre">maxlength</span></tt></td>
<td>Minimum and maximum length allowed for
<tt class="docutils literal"><span class="pre">string</span></tt> and <tt class="docutils literal"><span class="pre">list</span></tt> types.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">min</span></tt>, <tt class="docutils literal"><span class="pre">max</span></tt></td>
<td>Minimum and maximum values allowed for
<tt class="docutils literal"><span class="pre">integer</span></tt>, <tt class="docutils literal"><span class="pre">float</span></tt> and <tt class="docutils literal"><span class="pre">number</span></tt> types.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allowed</span></tt></td>
<td>List of allowed values for <tt class="docutils literal"><span class="pre">string</span></tt> and
<tt class="docutils literal"><span class="pre">list</span></tt> types.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">empty</span></tt></td>
<td>Only applies to string fields. If <tt class="docutils literal"><span class="pre">False</span></tt>,
validation will fail if the value is empty.
Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">items</span></tt></td>
<td>Defines a list of values allowed in a <tt class="docutils literal"><span class="pre">list</span></tt>
of fixed length, see <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#items-list">docs</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">schema</span></tt></td>
<td>Validation schema for <tt class="docutils literal"><span class="pre">dict</span></tt> types and
arbitrary length <tt class="docutils literal"><span class="pre">list</span></tt> types. For details
and usage examples, see <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#schema-dict">Cerberus documentation</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">unique</span></tt></td>
<td><p class="first">The value of the field must be unique within
the collection.</p>
<p>Please note: validation constraints are checked
against the database, and not between the
payload documents themselves. This causes an
interesting corner case: in the event of
a multiple documents payload where two or more
documents carry the same value for a field
where the &#8216;unique&#8217; constraint is set, the
payload will validate successfully, as there
are no duplicates in the database (yet).</p>
<p class="last">If this is an issue, the client can always send
the documents one at a time for insertion, or
validate locally before submitting the payload
to the API.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">unique_to_user</span></tt></td>
<td><p class="first">The field value is unique to the user. This is
useful when <a class="reference internal" href="authentication.html#user-restricted"><em>User-Restricted Resource Access</em></a> is
enabled on an endpoint. The rule will be
validated against <em>user data only</em>. So in this
scenario duplicates are allowed as long as they
are stored by different users. Conversely,
a single user cannot store duplicate values.</p>
<p class="last">If URRA is not active on the endpoint, this
rule behaves like <tt class="docutils literal"><span class="pre">unique</span></tt></p>
</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">data_relation</span></tt></td>
<td><p class="first">Allows to specify a referential integrity rule
that the value must satisfy in order to
validate. It is a dict with three keys:</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">resource</span></tt>: the name of the resource being referenced;</li>
<li><tt class="docutils literal"><span class="pre">field</span></tt>: the field name in the foreign resource;</li>
<li><tt class="docutils literal"><span class="pre">embeddable</span></tt>: set to <tt class="docutils literal"><span class="pre">True</span></tt> if clients can
request the referenced document to be embedded
with the serialization. See <a class="reference internal" href="features.html#embedded-docs"><em>Embedded Resource Serialization</em></a>. Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">version</span></tt>: set to <tt class="docutils literal"><span class="pre">True</span></tt> to require a
<tt class="docutils literal"><span class="pre">_version</span></tt> with the data relation. See <a class="reference internal" href="features.html#document-versioning"><em>Document Versioning</em></a>.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">nullable</span></tt></td>
<td>If <tt class="docutils literal"><span class="pre">True</span></tt>, the field value can be set to
<tt class="docutils literal"><span class="pre">None</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">default</span></tt></td>
<td><p class="first">The default value for the field. When serving
POST and PUT requests, missing fields will be
assigned the configured default values.</p>
<p>It works also for types <tt class="docutils literal"><span class="pre">dict</span></tt> and <tt class="docutils literal"><span class="pre">list</span></tt>.
The latter is restricted and works only for
lists with schemas (list with a random number
of elements and each element being a <tt class="docutils literal"><span class="pre">dict</span></tt>)</p>
<div class="last highlight-python"><div class="highlight"><pre><span class="n">schema</span> <span class="o">=</span> <span class="p">{</span>
  <span class="c"># Simple default</span>
  <span class="s">&#39;title&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">,</span>
    <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="s">&#39;M.&#39;</span>
  <span class="p">},</span>
  <span class="c"># Default in a dict</span>
  <span class="s">&#39;others&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span>
    <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">&#39;code&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;integer&#39;</span><span class="p">,</span>
        <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="mi">100</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="c"># Default in a list of dicts</span>
  <span class="s">&#39;mylist&#39;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;list&#39;</span><span class="p">,</span>
    <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;dict&#39;</span><span class="p">,</span>
      <span class="s">&#39;schema&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;name&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;string&#39;</span><span class="p">},</span>
        <span class="s">&#39;customer&#39;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s">&#39;type&#39;</span><span class="p">:</span> <span class="s">&#39;boolean&#39;</span><span class="p">,</span>
          <span class="s">&#39;default&#39;</span><span class="p">:</span> <span class="bp">False</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">versioning</span></tt></td>
<td>Enabled documents version control when <tt class="docutils literal"><span class="pre">True</span></tt>.
Defaults to <tt class="docutils literal"><span class="pre">False</span></tt>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">versioned</span></tt></td>
<td>If <tt class="docutils literal"><span class="pre">True</span></tt>, this field will be included in the
versioned history of each document when
<tt class="docutils literal"><span class="pre">versioning</span></tt> is enabled. Defaults to <tt class="docutils literal"><span class="pre">True</span></tt>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">valueschema</span></tt></td>
<td>Validation schema for all values of a <tt class="docutils literal"><span class="pre">dict</span></tt>.
The dict can have arbitrary keys, the values
for all of which must validate with given
schema. See <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#valueschema">valueschema example</a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">keyschema</span></tt></td>
<td>This is the counterpart to <tt class="docutils literal"><span class="pre">valueschema</span></tt> that
validates the keys of a dict.   Validation
schema for all values of a <tt class="docutils literal"><span class="pre">dict</span></tt>. See
<a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#keyschema">keyschema example</a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">regex</span></tt></td>
<td>Validation will fail if field value does not
match the provided regex rule. Only applies to
string fields. See <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#regex">email validation example</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">dependencies</span></tt></td>
<td>This rule allows a list of fields that must be
present in order for the target field to be
allowed. See <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#dependencies">dependencies example</a></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">anyof</span></tt></td>
<td>This rule allows you to list multiple sets of
rules to validate against. The field will be
considered valid if it validates against one
set in the list. See <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#anyof">anyof example</a></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">allof</span></tt></td>
<td>Same as <tt class="docutils literal"><span class="pre">anyof</span></tt>, except that all rule
collections in the list must validate.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">noneof</span></tt></td>
<td>Same as <tt class="docutils literal"><span class="pre">anyof</span></tt>, except that it requires no
rule collections in the list to validate.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">oneof</span></tt></td>
<td>Same as <tt class="docutils literal"><span class="pre">anyof</span></tt>, except that only one rule
collections in the list can validate.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">coerce</span></tt></td>
<td>Type coercion allows you to apply a callable to
a value before any other validators run. The
return value of the callable replaces the new
value in the document. This can be used to
convert values or sanitize data before it is
validated. See <a class="reference external" href="http://docs.python-cerberus.org/en/latest/usage.html#type-coercion">type coercion example</a></td>
</tr>
</tbody>
</table>
<p>Schema syntax is based on <a class="reference external" href="http://python-cerberus.org">Cerberus</a> and yes, it can be extended.  In fact, Eve
itself extends the original grammar by adding the <tt class="docutils literal"><span class="pre">unique</span></tt> and
<tt class="docutils literal"><span class="pre">data_relation</span></tt> keywords, along with the <tt class="docutils literal"><span class="pre">objectid</span></tt> datatype. For more
information on custom validation and usage examples see <a class="reference internal" href="validation.html#validation"><em>Data Validation</em></a>.</p>
<p>In <a class="reference internal" href="#local"><em>Resource / Item Endpoints</em></a> you customized the <cite>people</cite> endpoint. Then, in this section,
you defined <cite>people</cite> validation rules. Now you are ready to update the domain
which was originally set up in <a class="reference internal" href="#domain-configuration">Domain Configuration</a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># add the schema to the &#39;people&#39; resource definition</span>
<span class="n">people</span><span class="p">[</span><span class="s">&#39;schema&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">schema</span>
<span class="c"># update the domain</span>
<span class="n">DOMAIN</span><span class="p">[</span><span class="s">&#39;people&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">people</span>
</pre></div>
</div>
</div>
<div class="section" id="advanced-datasource-patterns">
<span id="datasource"></span><h2>Advanced Datasource Patterns<a class="headerlink" href="#advanced-datasource-patterns" title="Permalink to this headline">¶</a></h2>
<p>The <tt class="docutils literal"><span class="pre">datasource</span></tt> keyword allows to explicitly link API resources to database
collections. If omitted, the domain resource key is assumed to also be the name
of the database collection. It is a dictionary with four allowed keys:</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="60%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">source</span></tt></td>
<td>Name of the database collection consumed by the
resource.  If omitted, the resource name is
assumed to also be a valid collection name. See
<a class="reference internal" href="#source"><em>Multiple API Endpoints, One Datasource</em></a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">filter</span></tt></td>
<td>Database query used to retrieve and validate
data. If omitted, by default the whole
collection is retrievied. See <a class="reference internal" href="#filter"><em>Predefined Database Filters</em></a>.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">projection</span></tt></td>
<td>Fieldset exposed by the endpoint. If omitted,
by default all fields will be returned to the
client. See <a class="reference internal" href="#projection"><em>Limiting the Fieldset Exposed by the API Endpoint</em></a>.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">default_sort</span></tt></td>
<td><p class="first">Default sorting for documents retrieved at the
endpoint. If omitted, documents will be
returned with the default database order.
A valid statement would be:</p>
<p><tt class="docutils literal"><span class="pre">'datasource':</span> <span class="pre">{'default_sort':</span> <span class="pre">[('name',</span>
<span class="pre">1)]}</span></tt></p>
<p class="last">For more informations on sort and filters see
<a class="reference internal" href="features.html#filters"><em>Filtering</em></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">aggregation</span></tt></td>
<td><p class="first">Aggregation pipeline and options. When used all
other <tt class="docutils literal"><span class="pre">datasource</span></tt> settings are ignored,
except <tt class="docutils literal"><span class="pre">source</span></tt>. The endpoint will be
read-only and no item lookup will be available.
Defaults to <tt class="docutils literal"><span class="pre">None</span></tt>.</p>
<p>This is a dictionary with one or more of the
following keys:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">pipeline</span></tt>. The aggregation pipeline.
Syntax must match the one supported by
PyMongo. For more informations see <a class="reference external" href="http://api.mongodb.org/python/current/examples/aggregation.html#aggregation-framework">PyMongo
Aggregation Examples</a> and the official
<a class="reference external" href="https://docs.mongodb.org/v3.0/applications/aggregation/">MongoDB Aggregation Framework</a>
documentation.</p>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">options</span></tt>. Aggregation options. Must be
a dictionary with one or more of these keys:</p>
<blockquote>
<div><ul class="simple">
<li><tt class="docutils literal"><span class="pre">allowDiskUse</span></tt> (bool)</li>
<li><tt class="docutils literal"><span class="pre">maxTimeMS</span></tt> (int)</li>
<li><tt class="docutils literal"><span class="pre">batchSize</span></tt> (int)</li>
<li><tt class="docutils literal"><span class="pre">useCursor</span></tt> (bool)</li>
</ul>
</div></blockquote>
</li>
</ul>
<p class="last">You only need to set <tt class="docutils literal"><span class="pre">options</span></tt> if you want to
change any of <a class="reference external" href="http://api.mongodb.org/python/current/api/pymongo/collection.html#pymongo.collection.Collection.aggregate">PyMongo aggregation defaults</a>.</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="predefined-database-filters">
<span id="filter"></span><h3>Predefined Database Filters<a class="headerlink" href="#predefined-database-filters" title="Permalink to this headline">¶</a></h3>
<p>Database filters for the API endpoint are set with the <tt class="docutils literal"><span class="pre">filter</span></tt> keyword.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;datasource&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;$exists&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">}}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>In the example above, the API endpoint for the <cite>people</cite> resource will only
expose and update documents with an existing <cite>username</cite> field.</p>
<p>Predefined filters run on top of user queries (GET requests with <cite>where</cite>
clauses) and standard conditional requests (<cite>If-Modified-Since</cite>, etc.)</p>
<p>Please note that datasource filters are applied on GET, PATCH and DELETE
requests. If your resource allows POST requests (document insertions),
then you will probably want to set the validation rules accordingly (in our
example, &#8216;username&#8217; should probably be a required field).</p>
<div class="admonition-static-vs-dynamic-filters admonition">
<p class="first admonition-title">Static vs Dynamic filters</p>
<p class="last">Predefined filters are static. You can also exploit the <a class="reference internal" href="features.html#eventhooks"><em>Event Hooks</em></a>
system (specifically, <tt class="docutils literal"><span class="pre">on_pre_&lt;METHOD&gt;</span></tt> hooks) to set up dynamic filters
instead.</p>
</div>
</div>
<div class="section" id="multiple-api-endpoints-one-datasource">
<span id="source"></span><h3>Multiple API Endpoints, One Datasource<a class="headerlink" href="#multiple-api-endpoints-one-datasource" title="Permalink to this headline">¶</a></h3>
<p>Multiple API endpoints can target the same database collection. For
example you can set both <tt class="docutils literal"><span class="pre">/admins</span></tt> and <tt class="docutils literal"><span class="pre">/users</span></tt> to read and write from
the same <cite>people</cite> collection on the database.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;datasource&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;source&#39;</span><span class="p">:</span> <span class="s">&#39;people&#39;</span><span class="p">,</span>
        <span class="s">&#39;filter&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;userlevel&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The above setting will retrieve, edit and delete only documents from the
<cite>people</cite> collection with a <cite>userlevel</cite> of 1.</p>
</div>
<div class="section" id="limiting-the-fieldset-exposed-by-the-api-endpoint">
<span id="projection"></span><h3>Limiting the Fieldset Exposed by the API Endpoint<a class="headerlink" href="#limiting-the-fieldset-exposed-by-the-api-endpoint" title="Permalink to this headline">¶</a></h3>
<p>By default API responses to GET requests will include all fields defined by the
corresponding resource <a class="reference internal" href="#schema">schema</a>. The <tt class="docutils literal"><span class="pre">projection</span></tt> setting of the <cite>datasource</cite>
resource keyword allows you to redefine the fieldset.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;datasource&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;projection&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The above setting will expose only the <cite>username</cite> field to GET requests, no
matter the <a class="reference internal" href="#schema">schema</a> defined for the resource.</p>
<p>Likewise, you can exclude fields from API responses:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">people</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;datasource&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">&#39;projection&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s">&#39;username&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The above will include all document fields but <cite>username</cite>.</p>
<p>Please note that POST and PATCH methods will still allow the whole schema to be
manipulated. This feature can come in handy when, for example, you want to
protect insertion and modification behind an <a class="reference internal" href="authentication.html#auth"><em>Authentication and Authorization</em></a> scheme while leaving
read access open to the public.</p>
<div class="admonition-see-also admonition">
<p class="first admonition-title">See also</p>
<ul class="last simple">
<li><a class="reference internal" href="features.html#projections"><em>Projections</em></a></li>
<li><a class="reference internal" href="features.html#projection-filestorage"><em>Leveraging Projections to optimize the handling of media files</em></a></li>
</ul>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/eve_leaf.png" alt="Logo"/>
    
  </a>
</p>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=pyeve&repo=eve&type=star&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Stay Informed</h3>
<p>Receive updates on new releases and upcoming projects.</p>

<p><a href="https://twitter.com/nicolaiarocci" class="twitter-follow-button" data-show-count="false">Follow @nicolaiarocci</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script></p>

<p><iframe src="http://ghbtns.com/github-btn.html?user=nicolaiarocci&type=follow&count=false"
  allowtransparency="true" frameborder="0" scrolling="0" width="200" height="20"></iframe></p>

<p><a href="http://tinyletter.com/nicolaiarocci">Join Mailing List</a>.</p>

<h3>Other Projects</h3>

<p>More <a href="http://nicolaiarocci.com/">Nicola Iarocci</a> projects:</p>
<ul>
    <li><a href="http://python-cerberus.org/">Cerberus</a></li>
    <li><a href="https://github.com/pyeve/events">Events</a></li>
    <li><a href="https://github.com/pyeve/flask-sentinel">Flask-Sentinel</a></li>
    <li><a href="https://github.com/nicolaiarocci/flask-mimerender">Flask-MimeRender</a></li>
    <li><a href="https://github.com/pyeve/eve-demo">Eve-Demo</a></li>
    <li><a href="https://github.com/pyeve/eve-demo-client">Eve-Demo Client</a></li>
    <li><a href="https://github.com/pyeve/eve-swagger">Eve-Swagger</a></li>
    <li><a href="https://github.com/pyeve/eve-oauth2">Eve-OAuth2</a></li>
</ul>

<h3>Useful Links</h3>
<ul>
  <li><a href="https://github.com/pyeve/eve">Eve @ GitHub</a></li>
  <li><a href="https://stackoverflow.com/questions/tagged/eve">Eve @ Stack Overflow</a></li>
  <li><a href="https://groups.google.com/forum/?hl=en#!forum/python-eve">Eve @ Google Groups</a></li>
  <li><a href="irc://irc.freenode.net/python-eve">Eve @ IRC</a>
  <li><a href="https://pypi.python.org/pypi/eve">Eve @ PyPI</a></li>
  <li><a href="https://nicolaiarocci.com/tags/eve/">Eve @ Nicola Iarocci</a></li>
  <li><a href="https://github.com/pyeve/eve/issues">Issue Tracker</a></li>
</ul>
<p>You are looking at the documentation of the development version.</p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="foreword.html">Foreword</a></li>
<li class="toctree-l1"><a class="reference internal" href="rest_api_for_humans.html">REST API for Humans</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">Features</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#configuration-with-files">Configuration With Files</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-with-a-dictionary">Configuration With a Dictionary</a></li>
<li class="toctree-l2"><a class="reference internal" href="#development-production">Development / Production</a></li>
<li class="toctree-l2"><a class="reference internal" href="#global-configuration">Global Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="#domain-configuration">Domain Configuration</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#resource-item-endpoints">Resource / Item Endpoints</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#schema-definition">Schema Definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-datasource-patterns">Advanced Datasource Patterns</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#predefined-database-filters">Predefined Database Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-api-endpoints-one-datasource">Multiple API Endpoints, One Datasource</a></li>
<li class="toctree-l3"><a class="reference internal" href="#limiting-the-fieldset-exposed-by-the-api-endpoint">Limiting the Fieldset Exposed by the API Endpoint</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="validation.html">Data Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication and Authorization</a></li>
<li class="toctree-l1"><a class="reference internal" href="funding.html">Funding</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="snippets/index.html">Snippets</a></li>
<li class="toctree-l1"><a class="reference internal" href="extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Running the Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="support.html">Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="updates.html">Updates</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">Licensing</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>


<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><p>
Artwork by <a href="http://kalamun.org">Kalamun</a> © 2013
</p>

        </div>
      </div>
      <div class="clearer"></div>
    </div>

    <div class="footer">
      &copy;2017. Python-Eve is a <a href="http://nicolaiarocci.com">Nicola Iarocci</a> Project.
      
    </div>

    
    <a href="https://github.com/pyeve/eve" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="_static/forkme_right_green_007200.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-19006041-6', 'auto');
    ga('send', 'pageview');

</script>

  </body>
</html>